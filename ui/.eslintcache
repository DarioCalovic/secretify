[{"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/peerjs.js":"1","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/r/_id.vue":"2","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/crypto.js":"3","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/index.vue":"4","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/SecretRepository.js":"5","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/Repository.js":"6","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/FileRepository.js":"7","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/s/_id.vue":"8","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ProgressBar.vue":"9","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/imprint.vue":"10","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/privacy.vue":"11","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/vee-validate.js":"12","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/error.vue":"13","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/about.vue":"14","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/FooterBar.vue":"15","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/default.vue":"16","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/hero.vue":"17"},{"size":266,"mtime":1645614267170,"results":"18","hashOfConfig":"19"},{"size":7123,"mtime":1645729491069,"results":"20","hashOfConfig":"19"},{"size":3453,"mtime":1656000167837,"results":"21","hashOfConfig":"19"},{"size":22217,"mtime":1656152424876,"results":"22","hashOfConfig":"23"},{"size":946,"mtime":1645695113899,"results":"24","hashOfConfig":"19"},{"size":363,"mtime":1645697711049,"results":"25","hashOfConfig":"19"},{"size":471,"mtime":1645717742669,"results":"26","hashOfConfig":"19"},{"size":11980,"mtime":1656141342107,"results":"27","hashOfConfig":"23"},{"size":1981,"mtime":1645727859479,"results":"28","hashOfConfig":"19"},{"size":2909,"mtime":1656150181186,"results":"29","hashOfConfig":"23"},{"size":18117,"mtime":1656150274266,"results":"30","hashOfConfig":"23"},{"size":339,"mtime":1656142003587,"results":"31","hashOfConfig":"23"},{"size":9132,"mtime":1656144972787,"results":"32","hashOfConfig":"23"},{"size":3284,"mtime":1656151047946,"results":"33","hashOfConfig":"23"},{"size":2205,"mtime":1656152582536,"results":"34","hashOfConfig":"23"},{"size":357,"mtime":1656145911987,"results":"35","hashOfConfig":"23"},{"size":591,"mtime":1656145783787,"results":"36","hashOfConfig":"23"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1g33pkz",{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":6,"source":null},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":5,"source":null},"o67rnl",{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":null},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"63","messages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/peerjs.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/r/_id.vue",["71","72","73","74","75","76","77"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/crypto.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/index.vue",["78","79","80","81","82","83","84","85"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/SecretRepository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/Repository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/FileRepository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/s/_id.vue",["86","87","88","89","90"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ProgressBar.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/imprint.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/privacy.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/vee-validate.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/error.vue",["91"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/about.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/FooterBar.vue",["92"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/default.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/hero.vue",[],{"ruleId":"93","severity":1,"message":"94","line":20,"column":17,"nodeType":"95","endLine":20,"endColumn":38,"fix":"96"},{"ruleId":"97","severity":1,"message":"98","line":20,"column":24,"nodeType":"99","endLine":20,"endColumn":28},{"ruleId":"93","severity":1,"message":"100","line":21,"column":17,"nodeType":"95","endLine":21,"endColumn":31,"fix":"101"},{"ruleId":"93","severity":1,"message":"102","line":35,"column":17,"nodeType":"95","endLine":35,"endColumn":53,"fix":"103"},{"ruleId":"93","severity":1,"message":"104","line":36,"column":17,"nodeType":"95","endLine":36,"endColumn":29,"fix":"105"},{"ruleId":"93","severity":1,"message":"106","line":62,"column":17,"nodeType":"107","endLine":62,"endColumn":34,"fix":"108"},{"ruleId":"109","severity":1,"message":"110","line":131,"column":3,"nodeType":"99","endLine":131,"endColumn":7,"fix":"111"},{"ruleId":"93","severity":1,"message":"112","line":53,"column":23,"nodeType":"95","endLine":53,"endColumn":39,"fix":"113"},{"ruleId":"114","severity":1,"message":"115","line":210,"column":25,"nodeType":"107","endLine":210,"endColumn":65,"fix":"116"},{"ruleId":"93","severity":1,"message":"117","line":228,"column":33,"nodeType":"95","endLine":231,"endColumn":34,"fix":"118"},{"ruleId":"93","severity":1,"message":"112","line":253,"column":23,"nodeType":"95","endLine":253,"endColumn":43,"fix":"119"},{"ruleId":"120","severity":1,"message":"121","line":263,"column":31,"nodeType":"122","endLine":263,"endColumn":35},{"ruleId":"120","severity":1,"message":"121","line":271,"column":36,"nodeType":"122","endLine":271,"endColumn":40},{"ruleId":"120","severity":1,"message":"121","line":278,"column":40,"nodeType":"122","endLine":278,"endColumn":44},{"ruleId":"109","severity":1,"message":"123","line":578,"column":3,"nodeType":"99","endLine":578,"endColumn":10,"fix":"124"},{"ruleId":"114","severity":1,"message":"125","line":99,"column":23,"nodeType":"107","endLine":99,"endColumn":62,"fix":"126"},{"ruleId":"93","severity":1,"message":"127","line":119,"column":27,"nodeType":"95","endLine":119,"endColumn":60,"fix":"128"},{"ruleId":"93","severity":1,"message":"129","line":120,"column":27,"nodeType":"95","endLine":120,"endColumn":55,"fix":"130"},{"ruleId":"109","severity":1,"message":"131","line":217,"column":3,"nodeType":"99","endLine":217,"endColumn":10,"fix":"132"},{"ruleId":"109","severity":1,"message":"133","line":357,"column":3,"nodeType":"99","endLine":357,"endColumn":10,"fix":"134"},{"ruleId":"93","severity":1,"message":"135","line":15,"column":44,"nodeType":"107","endLine":15,"endColumn":59,"fix":"136"},{"ruleId":"93","severity":1,"message":"117","line":21,"column":15,"nodeType":"95","endLine":25,"endColumn":16,"fix":"137"},"vue/attributes-order","Attribute \"v-for\" should go before \"class\".","VDirectiveKey",{"range":"138","text":"139"},"vue/no-template-shadow","Variable 'peer' is already declared in the upper scope.","Identifier","Attribute \":key\" should go before \"class\".",{"range":"140","text":"141"},"Attribute \"v-for\" should go before \":class\".",{"range":"142","text":"143"},"Attribute \":key\" should go before \":class\".",{"range":"144","text":"145"},"Attribute \"id\" should go before \"v-model\".","VIdentifier",{"range":"146","text":"147"},"vue/order-in-components","The \"name\" property should be above the \"filters\" property on line 121.",{"range":"148","text":"149"},"Attribute \"v-model\" should go before \"animation\".",{"range":"150","text":"151"},"vue/attribute-hyphenation","Attribute 'validationMessage' must be hyphenated.",{"range":"152","text":"153"},"Attribute \"v-if\" should go before \"class\".",{"range":"154","text":"155"},{"range":"156","text":"157"},"vue/this-in-template","Unexpected usage of 'this'.","ThisExpression","The \"mounted\" property should be above the \"methods\" property on line 458.",{"range":"158","text":"159"},"Attribute 'toastText' must be hyphenated.",{"range":"160","text":"161"},"Attribute \"v-clipboard:copy\" should go before \"type\".",{"range":"162","text":"163"},"Attribute \"v-clipboard:success\" should go before \"type\".",{"range":"164","text":"165"},"The \"filters\" property should be above the \"asyncData\" property on line 193.",{"range":"166","text":"167"},"The \"mounted\" property should be above the \"methods\" property on line 232.",{"range":"168","text":"169"},"Attribute \"id\" should go before \"class\".",{"range":"170","text":"171"},{"range":"172","text":"173"},[615,687],"v-for=\"peer in peers\"\n                class=\"tag is-link is-normal mr-1\"",[615,718],":key=\"peer.id\"\n                class=\"tag is-link is-normal mr-1\"\n                v-for=\"peer in peers\"",[993,1173],"v-for=\"(message, index) in messages\"\n                :class=\"\n                  'chat--message mb-2' +\n                  (message.userId === user.id ? ' me' : '')\n                \"",[993,1202],":key=\"index\"\n                :class=\"\n                  'chat--message mb-2' +\n                  (message.userId === user.id ? ' me' : '')\n                \"\n                v-for=\"(message, index) in messages\"",[1933,1986],"id=\"chat_message\"\n                v-model=\"inputText\"",[2970,3181],"\n  name: 'Socket',\n  filters: {\n    prettyUsername(val, userId) {\n      if (val === 0) {\n        return 'Secretify Bot'\n      } else if (val === userId) {\n        return 'Me'\n      }\n      return val\n    },\n  },",[2336,2393],"v-model=\"isOpen\"\r\n                      animation=\"slide\"",[9050,9067],"validation-message",[9921,10138],"v-if=\"\r\n                                  policySetting.storage.filesystem\r\n                                    .allowed_file_extensions\r\n                                \"\r\n                                class=\"help\"",[11038,11099],"v-model=\"isOpenFile\"\r\n                      animation=\"slide\"",[18425,22128],"\r\n  mounted() {\r\n    // Track\r\n    this.$track.pageview({})\r\n  },\r\n  methods: {\r\n    generateRoomID() {\r\n      const randomName = uniqueNamesGenerator({\r\n        dictionaries: [adjectives, colors, animals],\r\n        separator: '-',\r\n      }) // big_red_donkey\r\n      const nanoid = customAlphabet(nolookalikes, 8)\r\n      return randomName + '@' + nanoid()\r\n    },\r\n    onCreateSecret() {\r\n      this.$refs.form.validate().then((success) => {\r\n        if (!success) {\r\n          return\r\n        }\r\n        this.createSecret()\r\n      })\r\n    },\r\n    onCreateSecretFile() {\r\n      this.$refs.formFile.validate().then((success) => {\r\n        if (!success) {\r\n          return\r\n        }\r\n        this.createSecret()\r\n      })\r\n    },\r\n    async createSecret() {\r\n      let passphrase = this.form.passphrase.value\r\n      let cipher = this.form.secret.value\r\n      window.localStorage.setItem('email', this.form.email.value)\r\n\r\n      // Hash passphrase if present\r\n      if (passphrase) {\r\n        passphrase = this.$crypto.createHashWithoutPadding(passphrase)\r\n      }\r\n\r\n      // Client encryption\r\n      const key = await this.$crypto.generateEncryptionKeyString()\r\n\r\n      // Handle file input\r\n      let fileIdentifier\r\n      if (this.file) {\r\n        let fileCipher = this.file\r\n        if (passphrase) {\r\n          fileCipher = await this.$crypto.encryptFile(fileCipher, passphrase)\r\n        }\r\n        const encryptedFile = await this.$crypto.encryptFile(fileCipher, key)\r\n\r\n        const formData = new FormData()\r\n        formData.append('Content-type', 'application/octet-stream')\r\n        formData.append('file', encryptedFile)\r\n\r\n        // Upload file\r\n        const res = await this.$repositories.file\r\n          .upload(this.file.name, this.file.size, this.file.type, formData)\r\n          .catch((e) => {\r\n            Toast.open({\r\n              message:\r\n                'Error while trying to upload file: ' + e.response.data.error,\r\n              type: 'is-danger',\r\n            })\r\n          })\r\n        if (res) {\r\n          const { status, data } = res\r\n          if (status === 200 && data) {\r\n            fileIdentifier = data.data.identifier\r\n          }\r\n        } else {\r\n          return\r\n        }\r\n\r\n        // Prepare meta information for cipher since it is a shared file\r\n        cipher = JSON.stringify({\r\n          text: cipher,\r\n          file_id: fileIdentifier,\r\n        })\r\n      }\r\n\r\n      if (cipher) {\r\n        if (passphrase) {\r\n          cipher = await this.$crypto.encryptString(cipher, passphrase)\r\n        }\r\n        cipher = await this.$crypto.encryptString(cipher, key)\r\n\r\n        // Create secret\r\n        const res = await this.$repositories.secret\r\n          .create(\r\n            cipher,\r\n            this.form.expiresAt.value,\r\n            this.form.revealOnce.value,\r\n            !!passphrase,\r\n            fileIdentifier,\r\n            this.form.email.value,\r\n            this.form.email.webhookAddr\r\n          )\r\n          .catch((e) => {\r\n            console.log(e)\r\n          })\r\n        if (res) {\r\n          const { status, data } = res\r\n          if (status === 200 && data) {\r\n            // Change route\r\n            this.$router.push({\r\n              name: 'created',\r\n              params: {\r\n                link: `${this.$config.uiURL}/s/${data.data.identifier}#${key}`,\r\n                expiresAt: this.form.expiresAt.value,\r\n                passphrase,\r\n                revealOnce: this.form.revealOnce.value,\r\n              },\r\n            })\r\n          }\r\n        }\r\n      } else {\r\n        Toast.open({\r\n          message: 'Something went wrong while preparing the cipher',\r\n          type: 'is-danger',\r\n        })\r\n      }\r\n    },\r\n  },",[4046,4055],"toast-text",[4825,4902],"v-clipboard:copy=\"decryptedValue\"\n                          type=\"is-primary\"",[4825,4957],"v-clipboard:success=\"onCopy\"\n                          type=\"is-primary\"\n                          v-clipboard:copy=\"decryptedValue\"",[7344,8120],"\n  filters: {\n    diffValidity(val) {\n      return dayjs(val).fromNow()\n    },\n  },\n  async asyncData({ error, params, $repositories }) {\n    const res = await $repositories.secret.view(params.id).catch((err) => {\n      return error({\n        statusCode: err.response.status,\n        message: err.message,\n      })\n    })\n    if (res) {\n      const { status, data } = res\n      if (status === 200 && data) {\n        return {\n          reveal: !data.data.has_passphrase,\n          secret: {\n            valid: true,\n            expires_at: data.data.expires_at,\n            revealOnce: data.data.reveal_once,\n            hasPassphrase: data.data.has_passphrase,\n            deleted: data.data.deleted,\n            file: data.data.file,\n          },\n        }\n      }\n    }\n  },",[8301,11884],"\n  mounted() {\n    this.encryptionKey = this.$route.hash.substring(1)\n\n    if (!this.secret.hasPassphrase) {\n      this.retrieveCipher()\n    }\n\n    // Track\n    this.$track.pageview({ url: '/s/{id}' }) // generalize secret link for tracking\n  },\n  methods: {\n    async downloadFile() {\n      const res = await this.$repositories.file\n        .download(this.secret.file.identifier)\n        .catch((err) => {\n          Toast.open({\n            message: 'File could not be downloaded',\n            type: 'is-danger',\n          })\n          return err\n        })\n      if (res) {\n        const { status, data } = res\n        if (status === 200) {\n          const decryptedFile = await this.$crypto.decryptFile(\n            data,\n            this.encryptionKey,\n            this.secret.file.filename\n          )\n\n          const url = window.URL.createObjectURL(decryptedFile)\n          const link = document.createElement('a')\n          link.href = url\n          link.setAttribute('download', this.secret.file.filename)\n          document.body.appendChild(link)\n          link.click()\n        }\n      }\n    },\n    onCopy(e) {\n      Toast.open(this.toastText)\n    },\n    async getCipher(id) {\n      const res = await this.$repositories.secret.cipher(id).catch((err) => {\n        return err\n      })\n      if (res) {\n        const { status, data } = res\n        if (status === 200 && data) {\n          this.secret.deleted = data.data.deleted\n          return data.data.cipher\n        }\n      }\n    },\n    async destroySecret() {\n      const res = await this.$repositories.secret\n        .delete(this.$route.params.id)\n        .catch((err) => {\n          Toast.open({\n            message: 'Secret could not be destroyed',\n            type: 'is-danger',\n          })\n          return err\n        })\n      if (res) {\n        const { status } = res\n        if (status === 200) {\n          Toast.open('Secret destroyed!')\n          setTimeout(function () {\n            window.location.reload(true)\n          }, 1500)\n        }\n      }\n    },\n    onRetrieveChipher() {\n      this.$refs.form.validate().then((success) => {\n        if (!success) {\n          return\n        }\n        this.retrieveCipher()\n      })\n    },\n    retrieveCipher() {\n      this.getCipher(this.$route.params.id)\n        .then((cipher) => {\n          this.revealSecret(cipher)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    async revealSecret(cipher) {\n      if (cipher) {\n        // Decrypt first with key from url hash\n        let decrypted = await this.$crypto.decryptString(\n          cipher,\n          this.encryptionKey\n        )\n\n        // Decrypt with passphrase\n        if (this.secret.hasPassphrase) {\n          const passphraseHash = this.$crypto.createHashWithoutPadding(\n            this.form.passphrase\n          )\n          try {\n            decrypted = await this.$crypto.decryptString(\n              decrypted,\n              passphraseHash\n            )\n          } catch (e) {\n            Toast.open({\n              message: 'Wrong passphrase!',\n              type: 'is-danger',\n            })\n            return\n          }\n        }\n        if (this.secret.file.identifier) {\n          try {\n            const d = JSON.parse(decrypted)\n            this.decryptedValue = d.text\n          } catch (e) {\n            Toast.open({\n              message: 'Secret is corrupt',\n              type: 'is-danger',\n            })\n            return\n          }\n        } else {\n          this.decryptedValue = decrypted\n        }\n      }\n      this.reveal = true\n    },\n  },",[507,546],"id=\"ghost-eyes\" class=\"box__ghost-eyes\"",[649,822],"v-if=\"\n                $config.track.enabled &&\n                $config.track.apiURL &&\n                $config.track.domain\n              \"\n              class=\"level-item\""]