[{"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/peerjs.js":"1","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/r/_id.vue":"2","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/crypto.js":"3","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/index.vue":"4","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/SecretRepository.js":"5","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/Repository.js":"6","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/FileRepository.js":"7","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/s/_id.vue":"8","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ProgressBar.vue":"9","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/imprint.vue":"10","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/privacy.vue":"11","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/vee-validate.js":"12","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/error.vue":"13","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/about.vue":"14","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/FooterBar.vue":"15","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/default.vue":"16","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/hero.vue":"17","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/NavBar.vue":"18","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/test.vue":"19","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ModalSecretGenerator.vue":"20","/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/CbTextarea.vue":"21"},{"size":266,"mtime":1645614267170,"results":"22","hashOfConfig":"23"},{"size":7123,"mtime":1645729491069,"results":"24","hashOfConfig":"23"},{"size":3552,"mtime":1663362734117,"results":"25","hashOfConfig":"26"},{"size":23770,"mtime":1663574173980,"results":"27","hashOfConfig":"26"},{"size":1004,"mtime":1663574193030,"results":"28","hashOfConfig":"26"},{"size":363,"mtime":1645697711049,"results":"29","hashOfConfig":"23"},{"size":471,"mtime":1645717742669,"results":"30","hashOfConfig":"23"},{"size":13377,"mtime":1663574449890,"results":"31","hashOfConfig":"26"},{"size":2012,"mtime":1663399955227,"results":"32","hashOfConfig":"26"},{"size":2909,"mtime":1656150181186,"results":"33","hashOfConfig":"26"},{"size":18117,"mtime":1656150274266,"results":"34","hashOfConfig":"26"},{"size":339,"mtime":1656142003587,"results":"35","hashOfConfig":"26"},{"size":2784,"mtime":1663234496010,"results":"36","hashOfConfig":"26"},{"size":3284,"mtime":1656151047946,"results":"37","hashOfConfig":"26"},{"size":2150,"mtime":1663240079990,"results":"38","hashOfConfig":"26"},{"size":608,"mtime":1663483437479,"results":"39","hashOfConfig":"26"},{"size":842,"mtime":1663323036230,"results":"40","hashOfConfig":"26"},{"size":941,"mtime":1663239073490,"results":"41","hashOfConfig":"26"},{"size":786,"mtime":1663396154207,"results":"42","hashOfConfig":"26"},{"size":1740,"mtime":1663399346637,"results":"43","hashOfConfig":"26"},{"size":478,"mtime":1663503258259,"results":"44","hashOfConfig":"26"},{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1g33pkz",{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":6,"source":null},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"o67rnl",{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":7,"source":null},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":7,"source":null},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":2,"source":null},"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/peerjs.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/r/_id.vue",["87","88","89","90","91","92","93"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/crypto.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/index.vue",["94","95","96","97","98","99","100","101","102","103"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/SecretRepository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/Repository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/repositories/FileRepository.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/s/_id.vue",["104","105","106","107","108","109","110","111","112"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ProgressBar.vue",["113"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/imprint.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/privacy.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/plugins/vee-validate.js",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/error.vue",["114"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/about.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/FooterBar.vue",["115"],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/default.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/layouts/hero.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/NavBar.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/pages/test.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/ModalSecretGenerator.vue",[],"/home/dario/go/src/github.com/DarioCalovic/secretify/ui/components/CbTextarea.vue",["116","117","118","119","120"],{"ruleId":"121","severity":1,"message":"122","line":20,"column":17,"nodeType":"123","endLine":20,"endColumn":38,"fix":"124"},{"ruleId":"125","severity":1,"message":"126","line":20,"column":24,"nodeType":"127","endLine":20,"endColumn":28},{"ruleId":"121","severity":1,"message":"128","line":21,"column":17,"nodeType":"123","endLine":21,"endColumn":31,"fix":"129"},{"ruleId":"121","severity":1,"message":"130","line":35,"column":17,"nodeType":"123","endLine":35,"endColumn":53,"fix":"131"},{"ruleId":"121","severity":1,"message":"132","line":36,"column":17,"nodeType":"123","endLine":36,"endColumn":29,"fix":"133"},{"ruleId":"121","severity":1,"message":"134","line":62,"column":17,"nodeType":"135","endLine":62,"endColumn":34,"fix":"136"},{"ruleId":"137","severity":1,"message":"138","line":131,"column":3,"nodeType":"127","endLine":131,"endColumn":7,"fix":"139"},{"ruleId":"121","severity":1,"message":"140","line":29,"column":25,"nodeType":"135","endLine":29,"endColumn":44,"fix":"141"},{"ruleId":"142","severity":1,"message":"143","line":31,"column":25,"nodeType":"144","endLine":31,"endColumn":48,"fix":"145"},{"ruleId":"121","severity":1,"message":"146","line":56,"column":23,"nodeType":"123","endLine":56,"endColumn":39,"fix":"147"},{"ruleId":"148","severity":1,"message":"149","line":229,"column":25,"nodeType":"135","endLine":229,"endColumn":65,"fix":"150"},{"ruleId":"121","severity":1,"message":"151","line":247,"column":33,"nodeType":"123","endLine":250,"endColumn":34,"fix":"152"},{"ruleId":"121","severity":1,"message":"146","line":272,"column":23,"nodeType":"123","endLine":272,"endColumn":43,"fix":"153"},{"ruleId":"154","severity":1,"message":"155","line":282,"column":31,"nodeType":"156","endLine":282,"endColumn":35},{"ruleId":"154","severity":1,"message":"155","line":290,"column":36,"nodeType":"156","endLine":290,"endColumn":40},{"ruleId":"154","severity":1,"message":"155","line":297,"column":40,"nodeType":"156","endLine":297,"endColumn":44},{"ruleId":"137","severity":1,"message":"157","line":619,"column":3,"nodeType":"127","endLine":619,"endColumn":10,"fix":"158"},{"ruleId":"148","severity":1,"message":"159","line":104,"column":23,"nodeType":"135","endLine":104,"endColumn":62,"fix":"160"},{"ruleId":"121","severity":1,"message":"161","line":124,"column":27,"nodeType":"123","endLine":124,"endColumn":60,"fix":"162"},{"ruleId":"121","severity":1,"message":"163","line":125,"column":27,"nodeType":"123","endLine":125,"endColumn":55,"fix":"164"},{"ruleId":"121","severity":1,"message":"161","line":135,"column":27,"nodeType":"123","endLine":135,"endColumn":65,"fix":"165"},{"ruleId":"121","severity":1,"message":"163","line":136,"column":27,"nodeType":"123","endLine":136,"endColumn":55,"fix":"166"},{"ruleId":"137","severity":1,"message":"167","line":217,"column":9,"nodeType":"127","endLine":217,"endColumn":18},{"ruleId":"137","severity":1,"message":"168","line":242,"column":3,"nodeType":"127","endLine":242,"endColumn":10,"fix":"169"},{"ruleId":"137","severity":1,"message":"170","line":247,"column":3,"nodeType":"127","endLine":247,"endColumn":7},{"ruleId":"137","severity":1,"message":"171","line":391,"column":3,"nodeType":"127","endLine":391,"endColumn":10,"fix":"172"},{"ruleId":"173","severity":1,"message":"174","line":63,"column":11,"nodeType":"175","endLine":63,"endColumn":21},{"ruleId":"121","severity":1,"message":"140","line":15,"column":44,"nodeType":"135","endLine":15,"endColumn":59,"fix":"176"},{"ruleId":"121","severity":1,"message":"151","line":28,"column":15,"nodeType":"123","endLine":32,"endColumn":16,"fix":"177"},{"ruleId":"121","severity":1,"message":"151","line":2,"column":26,"nodeType":"123","endLine":2,"endColumn":38,"fix":"178"},{"ruleId":"121","severity":1,"message":"179","line":6,"column":26,"nodeType":"123","endLine":6,"endColumn":32,"fix":"180"},{"ruleId":"181","severity":1,"message":"182","line":21,"column":5,"nodeType":"183","endLine":21,"endColumn":17},{"ruleId":"181","severity":1,"message":"184","line":22,"column":5,"nodeType":"183","endLine":22,"endColumn":18},{"ruleId":"181","severity":1,"message":"185","line":23,"column":5,"nodeType":"183","endLine":23,"endColumn":17},"vue/attributes-order","Attribute \"v-for\" should go before \"class\".","VDirectiveKey",{"range":"186","text":"187"},"vue/no-template-shadow","Variable 'peer' is already declared in the upper scope.","Identifier","Attribute \":key\" should go before \"class\".",{"range":"188","text":"189"},"Attribute \"v-for\" should go before \":class\".",{"range":"190","text":"191"},"Attribute \":key\" should go before \":class\".",{"range":"192","text":"193"},"Attribute \"id\" should go before \"v-model\".","VIdentifier",{"range":"194","text":"195"},"vue/order-in-components","The \"name\" property should be above the \"filters\" property on line 121.",{"range":"196","text":"197"},"Attribute \"id\" should go before \"class\".",{"range":"198","text":"199"},"vue/v-on-style","Expected '@' instead of 'v-on:'.","VAttribute",{"range":"200","text":"201"},"Attribute \"v-model\" should go before \"animation\".",{"range":"202","text":"203"},"vue/attribute-hyphenation","Attribute 'validationMessage' must be hyphenated.",{"range":"204","text":"205"},"Attribute \"v-if\" should go before \"class\".",{"range":"206","text":"207"},{"range":"208","text":"209"},"vue/this-in-template","Unexpected usage of 'this'.","ThisExpression","The \"mounted\" property should be above the \"methods\" property on line 482.",{"range":"210","text":"211"},"Attribute 'toastText' must be hyphenated.",{"range":"212","text":"213"},"Attribute \"v-clipboard:copy\" should go before \"type\".",{"range":"214","text":"215"},"Attribute \"v-clipboard:success\" should go before \"type\".",{"range":"216","text":"217"},{"range":"218","text":"219"},{"range":"220","text":"221"},"The \"asyncData\" property should be above the \"computed\" property on line 210.","The \"filters\" property should be above the \"asyncData\" property on line 217.",{"range":"222","text":"223"},"The \"data\" property should be above the \"computed\" property on line 210.","The \"mounted\" property should be above the \"methods\" property on line 259.",{"range":"224","text":"225"},"vue/require-prop-types","Prop \"duration\" should define at least its type.","Literal",{"range":"226","text":"227"},{"range":"228","text":"229"},{"range":"230","text":"231"},"Attribute \"v-else\" should go before \"class\".",{"range":"232","text":"233"},"vue/require-default-prop","Prop 'text' requires default value to be set.","Property","Prop 'first' requires default value to be set.","Prop 'rest' requires default value to be set.",[615,687],"v-for=\"peer in peers\"\n                class=\"tag is-link is-normal mr-1\"",[615,718],":key=\"peer.id\"\n                class=\"tag is-link is-normal mr-1\"\n                v-for=\"peer in peers\"",[993,1173],"v-for=\"(message, index) in messages\"\n                :class=\"\n                  'chat--message mb-2' +\n                  (message.userId === user.id ? ' me' : '')\n                \"",[993,1202],":key=\"index\"\n                :class=\"\n                  'chat--message mb-2' +\n                  (message.userId === user.id ? ' me' : '')\n                \"\n                v-for=\"(message, index) in messages\"",[1933,1986],"id=\"chat_message\"\n                v-model=\"inputText\"",[2970,3181],"\n  name: 'Socket',\n  filters: {\n    prettyUsername(val, userId) {\n      if (val === 0) {\n        return 'Secretify Bot'\n      } else if (val === userId) {\n        return 'Me'\n      }\n      return val\n    },\n  },",[1215,1276],"id=\"secretTextarea\"\r\n                        class=\"autosize\"",[1360,1365],"@",[2472,2529],"v-model=\"isOpen\"\r\n                      animation=\"slide\"",[9985,10002],"validation-message",[10856,11073],"v-if=\"\r\n                                  policySetting.storage.filesystem\r\n                                    .allowed_file_extensions\r\n                                \"\r\n                                class=\"help\"",[11973,12034],"v-model=\"isOpenFile\"\r\n                      animation=\"slide\"",[19472,23681],"\r\n  mounted() {\r\n    // Track\r\n    this.$track.pageview({})\r\n  },\r\n  methods: {\r\n    autoresize() {\r\n      const element = document.getElementById('secretTextarea')\r\n      element.style.height = '5px'\r\n      element.style.height = element.scrollHeight + 2 + 'px'\r\n    },\r\n    shuffleSecret() {\r\n      const password = generator.generate({\r\n        length: 30,\r\n        numbers: true,\r\n        symbols: true,\r\n        lowercase: true,\r\n        uppercase: true,\r\n        strict: true,\r\n      })\r\n      this.form.secret.value = password\r\n    },\r\n    generateRoomID() {\r\n      const randomName = uniqueNamesGenerator({\r\n        dictionaries: [adjectives, colors, animals],\r\n        separator: '-',\r\n      }) // big_red_donkey\r\n      const nanoid = customAlphabet(nolookalikes, 8)\r\n      return randomName + '@' + nanoid()\r\n    },\r\n    onCreateSecret() {\r\n      this.$refs.form.validate().then((success) => {\r\n        if (!success) {\r\n          return\r\n        }\r\n        this.createSecret()\r\n      })\r\n    },\r\n    onCreateSecretFile() {\r\n      this.$refs.formFile.validate().then((success) => {\r\n        if (!success) {\r\n          return\r\n        }\r\n        this.createSecret()\r\n      })\r\n    },\r\n    async createSecret() {\r\n      let passphrase = this.form.passphrase.value\r\n      let cipher = this.form.secret.value\r\n      window.localStorage.setItem('email', this.form.email.value)\r\n\r\n      // Hash passphrase if present\r\n      if (passphrase) {\r\n        passphrase = this.$crypto.createHashWithoutPadding(passphrase)\r\n      }\r\n\r\n      // Client encryption\r\n      const key = await this.$crypto.generateEncryptionKeyString()\r\n\r\n      // Handle file input\r\n      let fileIdentifier\r\n      if (this.file) {\r\n        let fileCipher = this.file\r\n        if (passphrase) {\r\n          fileCipher = await this.$crypto.encryptFile(fileCipher, passphrase)\r\n        }\r\n        const encryptedFile = await this.$crypto.encryptFile(fileCipher, key)\r\n\r\n        const formData = new FormData()\r\n        formData.append('Content-type', 'application/octet-stream')\r\n        formData.append('file', encryptedFile)\r\n\r\n        // Upload file\r\n        const res = await this.$repositories.file\r\n          .upload(this.file.name, this.file.size, this.file.type, formData)\r\n          .catch((e) => {\r\n            Toast.open({\r\n              message:\r\n                'Error while trying to upload file: ' + e.response.data.error,\r\n              type: 'is-danger',\r\n            })\r\n          })\r\n        if (res) {\r\n          const { status, data } = res\r\n          if (status === 200 && data) {\r\n            fileIdentifier = data.data.identifier\r\n          }\r\n        } else {\r\n          return\r\n        }\r\n\r\n        // Prepare meta information for cipher since it is a shared file\r\n        cipher = JSON.stringify({\r\n          text: cipher,\r\n          file_id: fileIdentifier,\r\n        })\r\n      }\r\n\r\n      if (cipher) {\r\n        if (passphrase) {\r\n          cipher = await this.$crypto.encryptString(cipher, passphrase)\r\n        }\r\n        cipher = await this.$crypto.encryptString(cipher, key)\r\n\r\n        // Create secret\r\n        const res = await this.$repositories.secret\r\n          .create(\r\n            cipher,\r\n            this.form.expiresAt.value,\r\n            this.form.revealOnce.value,\r\n            this.form.destroyManual.value,\r\n            !!passphrase,\r\n            fileIdentifier,\r\n            this.form.email.value,\r\n            this.form.email.webhookAddr\r\n          )\r\n          .catch((e) => {\r\n            console.log(e)\r\n          })\r\n        if (res) {\r\n          const { status, data } = res\r\n          if (status === 200 && data) {\r\n            // Change route\r\n            this.$router.push({\r\n              name: 'created',\r\n              params: {\r\n                link: `${this.$config.uiURL}/s/${data.data.identifier}#${key}`,\r\n                expiresAt: this.form.expiresAt.value,\r\n                passphrase,\r\n                revealOnce: this.form.revealOnce.value,\r\n              },\r\n            })\r\n          }\r\n        }\r\n      } else {\r\n        Toast.open({\r\n          message: 'Something went wrong while preparing the cipher',\r\n          type: 'is-danger',\r\n        })\r\n      }\r\n    },\r\n  },",[4247,4256],"toast-text",[5050,5127],"v-clipboard:copy=\"decryptedValue\"\n                          type=\"is-primary\"",[5050,5182],"v-clipboard:success=\"onCopy\"\n                          type=\"is-primary\"\n                          v-clipboard:copy=\"decryptedValue\"",[5622,5704],"v-clipboard:copy=\"decryptedValueFirst\"\n                          type=\"is-primary\"",[5622,5759],"v-clipboard:success=\"onCopy\"\n                          type=\"is-primary\"\n                          v-clipboard:copy=\"decryptedValueFirst\"",[8335,9164],"\n  filters: {\n    diffValidity(val) {\n      return dayjs(val).fromNow()\n    },\n  },\n  async asyncData({ error, params, $repositories }) {\n    const res = await $repositories.secret.view(params.id).catch((err) => {\n      return error({\n        statusCode: err.response.status,\n        message: err.message,\n      })\n    })\n    if (res) {\n      const { status, data } = res\n      if (status === 200 && data) {\n        return {\n          reveal: !data.data.has_passphrase,\n          secret: {\n            valid: true,\n            expires_at: data.data.expires_at,\n            revealOnce: data.data.reveal_once,\n            destroyManual: data.data.destroy_manual,\n            hasPassphrase: data.data.has_passphrase,\n            deleted: data.data.deleted,\n            file: data.data.file,\n          },\n        }\n      }\n    }\n  },",[9406,13281],"\n  mounted() {\n    this.encryptionKey = this.$route.hash.substring(1)\n\n    if (!this.secret.hasPassphrase) {\n      this.retrieveCipher()\n    }\n\n    // Track\n    this.$track.pageview({ url: '/s/{id}' }) // generalize secret link for tracking\n  },\n  methods: {\n    async downloadFile() {\n      const res = await this.$repositories.file\n        .download(this.secret.file.identifier)\n        .catch((err) => {\n          Toast.open({\n            message: 'File could not be downloaded',\n            type: 'is-danger',\n          })\n          return err\n        })\n      if (res) {\n        const { status, data } = res\n        if (status === 200) {\n          const decryptedFile = await this.$crypto.decryptFile(\n            data,\n            this.encryptionKey,\n            this.secret.file.filename\n          )\n\n          const url = window.URL.createObjectURL(decryptedFile)\n          const link = document.createElement('a')\n          link.href = url\n          link.setAttribute('download', this.secret.file.filename)\n          document.body.appendChild(link)\n          link.click()\n        }\n      }\n    },\n    onCopy(e) {\n      Toast.open(this.toastText)\n    },\n    async getCipher(id) {\n      const res = await this.$repositories.secret.cipher(id).catch((err) => {\n        return err\n      })\n      if (res) {\n        const { status, data } = res\n        if (status === 200 && data) {\n          this.secret.deleted = data.data.deleted\n          return data.data.cipher\n        }\n      }\n    },\n    async destroySecret() {\n      const res = await this.$repositories.secret\n        .delete(this.$route.params.id)\n        .catch((err) => {\n          Toast.open({\n            message: 'Secret could not be destroyed',\n            type: 'is-danger',\n          })\n          return err\n        })\n      if (res) {\n        const { status } = res\n        if (status === 200) {\n          Toast.open('Secret destroyed!')\n          setTimeout(function () {\n            window.location.reload(true)\n          }, 1500)\n        }\n      }\n    },\n    onRetrieveChipher() {\n      this.$refs.form.validate().then((success) => {\n        if (!success) {\n          return\n        }\n        this.retrieveCipher()\n      })\n    },\n    retrieveCipher() {\n      this.getCipher(this.$route.params.id)\n        .then((cipher) => {\n          this.revealSecret(cipher)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    async revealSecret(cipher) {\n      if (cipher) {\n        // Decrypt first with key from url hash\n        let decrypted = await this.$crypto.decryptString(\n          cipher,\n          this.encryptionKey\n        )\n\n        // Decrypt with passphrase\n        if (this.secret.hasPassphrase) {\n          const passphraseHash = this.$crypto.createHashWithoutPadding(\n            this.form.passphrase\n          )\n          try {\n            decrypted = await this.$crypto.decryptString(\n              decrypted,\n              passphraseHash\n            )\n          } catch (e) {\n            Toast.open({\n              message: 'Wrong passphrase!',\n              type: 'is-danger',\n            })\n            return\n          }\n        }\n        if (this.secret.file.identifier) {\n          try {\n            const d = JSON.parse(decrypted)\n            this.decryptedValue = d.text\n          } catch (e) {\n            Toast.open({\n              message: 'Secret is corrupt',\n              type: 'is-danger',\n            })\n            return\n          }\n        } else {\n          this.decryptedValue = decrypted\n          if (/\\r|\\n/.exec(this.decryptedValue)) {\n            const parts = this.decryptedValue.split('\\n')\n            this.decryptedValueFirst = parts[0]\n            if (parts.length > 1) {\n              this.decryptedValueRest = '\\n' + parts.slice(1).join('\\n')\n            }\n          }\n        }\n      }\n      this.reveal = true\n    },\n  },",[507,546],"id=\"ghost-eyes\" class=\"box__ghost-eyes\"",[937,1110],"v-if=\"\n                $config.track.enabled &&\n                $config.track.apiURL &&\n                $config.track.domain\n              \"\n              class=\"level-item\"",[18,48],"v-if=\"first\" class=\"dark mb-3\"",[137,161],"v-else class=\"dark mb-3\""]